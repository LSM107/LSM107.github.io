---
layout: single

title:  "SAT/SMT 기본 사항, SAT 예시"

categories: SAT

tag: [SAT, SMT, coursera]

typora-root-url: ../

toc: true

author_profile: false

sidebar:
    nav: "docs"

# search: false
use_math: true
---



#### 글에 들어가기 앞서

이 포스팅은 Coursera 강의, '**Automated Reasoning: Satisfiablity**'에 대한 정리입니다. 이 Coursera 강의는 총 4주차로 구성되어있습니다. 강의 구성에 맞춰 포스팅도 한 주차에 한 개씩, 총 4개의 포스팅을 작성할 계획입니다.



강의 원본은 아래의 링크를 통해 확인할 수 있습니다.

- <https://www.coursera.org/learn/automated-reasoning-sat>





## 일반 소개

이 강의에서는 만족 가능성(Satisfiability)이라는 개념과 SAT 해결이라는 기술에 대해 다룹니다. SAT 해결은 특정 공식이 만족 가능한지, 즉 참인지 거짓인지를 확인하는 문제를 해결하는 것을 의미합니다.

놀랍게도 추상적으로 느껴지는 이 기술은 스케줄링, 스도쿠 퍼즐 해결, 프로그램 정확성 검증 등 다양한 분야에서 활용됩니다. 더욱이 포스터 인쇄처럼 우리 주변에서 쉽게 접할 수 있는 문제에도 적용될 수 있다는 사실은 정말 흥미롭습니다.

강의에서 제공되는 퀴즈를 풀어보는 것은 물론, Z3와 같은 도구를 직접 활용하여 문제를 해결해 보는 경험을 통해 만족 가능성에 대한 이해를 더욱 높일 수 있습니다. 아래 링크는 Z3 solver를 파이썬에서 활용하는 방법을 소개하는 튜토리얼입니다.

- <https://github.com/Z3Prover/z3/blob/master/examples/python/tutorial/jupyter/guide.ipynb>



## SAT 소개

SAT 해결을 이해하기 전에, 핵심 개념인 **명제 논리 공식**에 대해 살펴보겠습니다.

**명제 논리 공식**은 불리안 변수와 논리 연산자로 구성됩니다. 논리 연산자에는 부정(negation), 논리합(disjunction), 논리곱(conjunction), 함의(implication), 동치(bi-implication) 등이 있습니다.

**만족 가능성(Satisfiability)**이란 명제 논리 공식이 참이 되도록 변수에 값을 할당할 수 있는지를 의미합니다. 만족 가능한 공식을 **SAT(Satisfiable)**이라고 부르며, 이를 만족시키는 변수 할당을 **만족 할당(Satisfying Assignment)**이라고 합니다.

**쉽게 말해, SAT는 명제 논리 공식이 참이 될 수 있는 조건이 존재하는지 확인하는 문제입니다.**



*예시 01.*

- **공식:** $A\land B \lor \neg C$
- **만족 가능 여부:** SAT
- **만족 할당:** {A = True, B = True, C = True}



*예시 02.*

- **공식:** $(p \lor q) \land (\neg p \lor \neg q) \land (p \lor \neg q)$

- **만족 가능 여부:** SAT

- **만족 할당:**

  - 경우 1: {p = True, q = False}

  - 경우 2: {p = False, q = True}



*예시 03.*

- **공식:** $(p \lor q) \land (\neg p \lor \neg q) \land (p \land q)$

- **만족 가능 여부:** Unsatisfiable



위의 여러 예시들을 통해 알 수 있듯이, **SAT(Satisfiability) 문제**는 주어진 논리식이 참이 되게 하는 변수 값의 조합이 존재하는지를 판별하는 문제입니다. 이 문제를 해결하는 한 가지 방법은 **진리표(Truth Tables)**를 작성하는 것입니다. 진리표를 사용하는 방법은 모든 가능한 변수 값의 조합을 살펴보면서, 그 중에서 주어진 논리식을 만족하는(satisfiable) 조합이 있는지를 찾아냅니다.



*예시 01.*

- **공식:** $A\land B \lor \neg C$

<img src="/images/2024-03-13-SAT_SMT_basic/image-20240313165757261.png" alt="image-20240313165757261" style="zoom:50%;" />



위 예시에서는 True, False로 진리표를 작성했는데요, 대개는 True를 1, False를 0으로 표현합니다.



예시 02.

- **공식:** $\neg ((p \land q )\rarr (p \lor r))$

![image-20240313172158611](/images/2024-03-13-SAT_SMT_basic/image-20240313172158611.png)



진리표를 사용하는 방식은 직관적이고 간단해 보일 수 있지만, 변수의 수가 증가함에 따라 그 복잡성은 **기하급수적**으로 증가합니다. 왜냐하면, 각 변수에 대해 참(true) 또는 거짓(false)의 두 가지 상태가 가능하기 때문에, n개의 변수가 있다면 우리는 $2^n$개의 다른 조합을 살펴봐야 합니다. 예를 들어, 변수가 3개인 경우에는 $2^3 = 8$개의 조합을 살펴봐야 하고, 변수가 10개인 경우에는 $2^{10} = 1024$개의 조합을 검토해야 합니다.

이 방법의 장점은 모든 가능한 조합을 검토하기 때문에, 만약 해결책이 존재한다면 반드시 찾을 수 있다는 것입니다. 하지만 단점도 분명합니다. 변수의 수가 많아질수록 필요한 계산량이 엄청나게 증가하여, 실제로 많은 변수를 가진 복잡한 문제에 적용하기에는 다소 비현실적인 방법입니다.



**SAT 문제**는 논리식의 만족 가능성을 판단하는 문제입니다. 하지만 이 문제는 NP-완전 문제로 분류되는데, 모든 공식에 대해 효율적인 알고리즘이 존재하지 않을 가능성이 높습니다.

**하지만 특정 유형의 SAT 문제에는 효율적인 해결 방법이 존재합니다.** 대표적인 예시가 바로 **n-queens 문제**입니다. n-queens 문제는 n개의 체스 말을 서로 공격하지 않는 방식으로 배치하는 문제입니다. **z3**와 같은 SAT solver를 사용하면, n이 100일 때 n-queens 문제를 10초 안에 해결할 수 있습니다. 

<img src="/images/2024-03-13-SAT_SMT_basic/image-20240313173827346.png" alt="image-20240313173827346" style="zoom:33%;" />



## SMT 구문(syntax) 및 도구

지금까지 우리는 SAT, 즉 주어진 명제 논리 공식이 참인 값을 가지는지 여부를 판단하는 문제에 대해 알아보았습니다. 그렇다면 **SMT(Satisfiability Modulo Theories)**는 무엇일까요? SMT는 SAT의 확장된 형태로, 추가된 여러 이론들을 기반으로 한 SAT 문제라고 할 수 있습니다. 특히 우리가 주목하는 이론은 실수와 정수에 대한 선형 부등식을 다루는 이론입니다.

이게 무슨 말일까요? SAT가 명제 논리 공식의 참 또는 거짓을 판단하는 문제라면, SMT는 단순히 명제 논리 공식에 국한되지 않고, 보다 넓은 범위의 논리적 체계와 그에 해당하는 공리 집합을 포괄합니다. 예를 들어, 명제 논리 공식 대신 부등식을 다룬다면, 해당 부등식을 만족하는 변수의 값, 즉 '만족 할당'을 찾는 문제도 SMT의 범위 안에 포함됩니다.

이처럼 SMT는 명제 논리 공식뿐만 아니라, 실수나 정수에 대한 선형 부등식과 같은 다양한 이론을 적용하여 그 만족 가능성을 탐구하는, SAT보다 더 넓은 범위의 문제를 포함합니다.



*예시 01.*

- **공식:** $(2a > b + c) \land (2b > c + d) \land (2c > 3d) \land (3d > a + c)$​
- **만족 가능 여부:** SAT

- **만족 할당:** {a = 30, b = 27, C = 32, d = 21}







