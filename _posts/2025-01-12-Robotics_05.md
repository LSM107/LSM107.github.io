---
layout: single

title:  "로보틱스 05: 동역학"

categories: Robotics

tag: [Robotics, Dynamics]

typora-root-url: ../

toc: true

author_profile: false

sidebar:
    nav: "docs"

# search: false
use_math: true
---



**글에 들어가기 앞서...**

이 포스팅은 '**로보틱스**'에 대한 내용을 담고 있습니다.



자료 출처: ***정슬, 로봇공학, 5판***,  ***송재복, 로봇 팔의 설계 및 제어***, ***F. C. Park and K. M. Lynch, Introduction to Robotics***, ***John J. Craig, Introduction to Robotics (3rd Edition)***, <https://www.youtube.com/watch?v=O1saBbqTx5Q&list=PLP4rlEcTzeFIvgNQD8M1T7_PzxO3JNK5Z&index=11>









# 동역학

  이전 포스팅에서는 각 관절과 말단부의 **속도** 관계와 정지한 상태에서의 **정적 힘**의 관계에 대해서 다뤘습니다. 그런데 우리가 로봇팔을 사용하는 상황을 생각해보면, 이것만으로 충분하지 않습니다. 예를 들어서 자동차를 조립하는 로봇은 철판을 들고 조립 위치까지 움직여야 합니다. 이 과정에서 로봇은 움직이는 과정중에 지속적으로 힘이 필요합니다. 다시 말해, 정적 힘이 아닌 동적 힘을 계산할 수 있어야 로봇 팔의 가속과 힘을 결정할 수 있습니다. 이 포스팅에서는 로봇 팔을 움직이는 과정 중의 힘인 동적 힘, 동역학에 대해서 다룹니다.







## 동역학이란 무엇인가

동역학 역시 기구학과 마찬가지로 관절과 말단부의 관계에 대한 것입니다. 구체적으로 동역학에서의 관심 대상은 궤도점(말단)의 위치, 속도, 그리고 가속도($\Theta$, $\dot\Theta$, $\ddot\Theta$)와 관절 토크 벡터($\tau$)의 관계입니다. 반대로 관절 토크 벡터를 이렇게 설정했을 때, 궤도점은 어떻게 운동하는가 역시 동역학에서 다루는 문제입니다.







## 강체의 가속

힘은 가속과 동일한 개념이기 때문에 강체의 가속에 대해서 먼저 규정하겠습니다.


$$
{^B\dot V_Q} = \frac{d}{dt}{^BV_Q}=\lim_{\Delta t \rightarrow 0}\frac{ {^BV_Q} (t+\Delta t) - {^BV_Q}(t)}{\Delta t}
$$

$$
{^B\dot \Omega_Q} = \frac{d}{dt}{^B\Omega_Q}=\lim_{\Delta t \rightarrow 0}\frac{ {^B\Omega_Q}(t+\Delta t) - {^B\Omega_Q}(t)}{\Delta t}
$$

$$
\dot v_A = {^U \dot V_{A \space Origin}}
$$

$$
\dot \omega_A = {^U \dot \Omega_{A \space Origin}}
$$



속도와 각속도 벡터는 알고자 하는 점의 위치와 각을 시간에 대해 미분해 얻을 수 있었습니다. 가속도와 각가속도는 속도와 각속도를 시간에 대해 한 번 더 미분하여 얻을 수 있습니다. 속도와 각속도에서 우주 좌표계($\{U\}$)에 대한 속도와 각속도를 그리스 소문자로 표기했었는데요, 가속도와 각가속도에서 똑같은 관례를 따릅니다.





### 선가속도

먼저, 속도에 대한 식을 유도하는 중간에 만났던 식에서부터 살펴보겠습니다.



$$
{^AV_Q} = {^A_BR{^BV_Q}}+{^A\Omega_B}\times {^A_BR{^BQ}}
$$



위 식은 속도를 유도할 때 구했던 마지막 식이 아닌데요, 계$\{A\}$ 상에서의 계$\{B\}$의 속도가 포함되어있지 않습니다. 속도에서와 마찬가지로 유도의 가장 마지막에 별도로 추가합니다. 계$\{A\}$ 상에서의 계$\{B\}$의 속도는 $\{A\}$관절에 의해서 발생하게 되는데, 이는 다른 속도들과 독립적이기 때문에 나중에 추가해도 결과에 차이가 발생하지 않습니다. 아무튼 위 식을 한 번 미분해보겠습니다. 


$$
\frac{d}{dt}{^AV_Q} = \frac{d}{dt}({^A_BR{^BV_Q}})+\frac{d}{dt}({^A\Omega_B}\times {^A_BR{^BQ}})
$$


우항의 첫 번째 항은 그대로 두고, 두 번째 항을 곱미분의 형태로 풀면 아래와 같습니다.


$$
\frac{d}{dt}{^AV_Q} = \frac{d}{dt}({^A_BR{^BV_Q}})+[{^A\dot\Omega_B}\times {^A_BR{^BQ}} + {^A\Omega_B}\times \frac{d}{dt}({^A_BR{^BQ}})]
$$


이 식을 정리하고, 계$\{A\}$ 상에서의 계$\{B\}$의 가속도 별도로 추가하면 아래와 같습니다.


$$
{^A\dot V_Q} = {^A\dot V_{B \space Origin}} + {^A_BR{^B\dot V_Q}} + 2{^A\Omega_B} \times {^A_BR{^BV_Q}} + {^A\dot\Omega_B} \times {^A_BR{^BQ}} + {^A\Omega_B} \times ({^A\Omega_B} \times {^A_BR{^BQ}})
$$


식이 꽤나 복잡한데요, 회전 관절일 경우의 링크의 선가속도는 회전의 방식과 거리가 고정되는 몇 가지 요소 덕분에 보다 간단하게 나타납니다. 


$$
{^A\dot V_Q} = {^A\dot V_{B \space Origin}} + {^A\Omega_B} \times({^A\Omega_B} \times {^A_BR{^BQ}}) + {^A\dot\Omega_B} \times {^A_BR{^BQ}} 
$$




### 각가속도

각가속도는 선가속도에 비해 훨씬 더 간단합니다. 이전에 각속도에 대해 따로 일반적인 식의 형태를 다룬 적은 없는데요, 두 계 사이의 각속도의 관계는 아래와 같습니다.


$$
{^A\Omega_C} = {^A\Omega_B} + {^A\Omega_C}
$$


너무 당연하게 받아들여지는 식입니다. 회전행렬을 사용해 좀 더 구조를 드러내 보겠습니다.


$$
{^A\Omega_C} = {^A\Omega_B} + {^A_BR}{^B\Omega_C}
$$


이제 시간에 대한 미분을 통해 각가속도를 구하면 아래와 같습니다.


$$
{^A\dot\Omega_C} = {^A\dot\Omega_B} + {^A_BR}{^B\dot\Omega_C} + {^A\Omega_B} \times {^A_BR}{^B\Omega_C}
$$






## 질량 분포

각가속도를 유도하는 식을 구해내긴 했는데, 중요한 사실을 하나 다루지 않았습니다. 그건 바로 **토크와 각가속도의 관계**입니다. 직선 운동을 하는 물체의 가속도와 힘의 관계는 $F=ma$라는 식으로 굉장히 익숙한데요, 사실 회전 운동의 경우도 용어와 기호가 다를 뿐 식의 구조는 동일합니다.


$$
\tau = I\alpha
$$

$$
F = ma
$$



위 식에서 $\tau$는 토크, $I$는 관성 모먼트(Moment of Inertia), 그리고 $\alpha$는 각가속도를 의미합니다. 회전하는 물체의 각가속도와 토크 사이의 관계는 물체의 전체 질량으로 설명되지 않습니다. 그리고 동일한 물체라고 할지라도 어떤 방향으로 돌리느냐에 따라 들어가는 토크의 힘은 달라집니다.  물체 내부의 질량 분포에 따라 결정되는 $I$라는 관성 모먼트를 도입해 물체의 회전 움직임을 거시적으로 설명합니다. 그리고 물체의 회전 방향에 따라 달라지는 관성 모먼트를 설명하기 위해, 축 방향에 따른 관성 모먼트를 텐서를 사용해 모두 설명하는데, 이를 관성 텐서라고 부릅니다.


$$
{^AI} = 
\begin{bmatrix}
I_{XX} & -I_{XY} & -I_{XZ} \\
-I_{XY} & I_{YY} & -I_{YZ} \\
-I_{XZ} & -I_{YZ} & I_{ZZ} \\
\end{bmatrix}
$$

$$
I_{XX} = \int\int\int_V(y^2 + z^2)\rho \space dv
$$

$$
I_{XY} = \int\int\int_V(xy)\rho \space dv
$$



$\int\int\int_V$은 모든 축방향에 대해 적분을 수행한다는 의미입니다. 따라서 $Volume$의 앞 철자인 $V$를 적분 기호의 밑첨자에 표기합니다. $\rho$는 밀도를 의미합니다. 즉, $I_{XX}$는 $x$축 방향의 거리의 제곱($=y^2 + z^2$)과 밀도를 곱해서 적분한 값입니다. $I_{XX}$를 **관성 질량 모먼트**라고 하고, $I_{XY}$와 같이 다른 축방향에 대한 관성 모먼트를 **관성의 질량적**이라고 부릅니다. 관성 질량 모먼트와 달리 관성의 질량적은 직관적으로 잘 받아들여지는 컨셉은 아닌데요, 보다 자세한 설명은 아래의 유튜브 영상에서 확인할 수 있습니다.

- <https://www.youtube.com/watch?v=npLJYGu8n5c>

